(()=>{const o={flakeCount:100,minDist:150,color:"255, 255, 255",size:2,speed:.5,opacity:.3,stepsize:.5};let i=!0;const w=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};window.requestAnimationFrame=w;const n=document.getElementById("snow"),a=n.getContext("2d"),h=o.flakeCount;let p=-100,u=-100,v=[];n.width=window.innerWidth,n.height=window.innerHeight;const f=()=>{if(!i)return;a.clearRect(0,0,n.width,n.height);const t=o.minDist;for(let d=0;d<h;d++){let e=v[d];const l=p,s=u,c=e.x,m=e.y,r=Math.sqrt((l-c)*(l-c)+(s-m)*(s-m));if(r<t){const b=t/(r*r),z=(l-c)/r,S=(s-m)/r,M=b/2;e.velX-=M*z,e.velY-=M*S}else e.velX*=.98,e.velY<e.speed&&e.speed-e.velY>.01&&(e.velY+=(e.speed-e.velY)*.01),e.velX+=Math.cos(e.step+=.05)*e.stepSize;a.fillStyle="rgba("+o.color+", "+e.opacity+")",e.y+=e.velY,e.x+=e.velX,(e.y>=n.height||e.y<=0)&&g(e),(e.x>=n.width||e.x<=0)&&g(e),a.beginPath(),a.arc(e.x,e.y,e.size,0,Math.PI*2),a.fill()}w(f)},g=t=>{t.x=Math.floor(Math.random()*n.width),t.y=0,t.size=Math.random()*3+2,t.speed=Math.random()*1+.5,t.velY=t.speed,t.velX=0,t.opacity=Math.random()*.5+.3},x=()=>{if(localStorage.getItem("kr-disable-snow")!==null||window.kr?.notMobile===!1){i=!1,n.classList.add("disabled");return}y()},y=()=>{for(let t=0;t<h;t++){const d=Math.floor(Math.random()*n.width),e=Math.floor(Math.random()*n.height),l=Math.random()*3+o.size,s=Math.random()*1+o.speed,c=Math.random()*.5+o.opacity;v.push({speed:s,velX:0,velY:s,x:d,y:e,size:l,stepSize:Math.random()/30*o.stepsize,step:0,angle:180,opacity:c})}f()};document.addEventListener("mousemove",t=>{p=t.clientX,u=t.clientY}),window.addEventListener("resize",()=>{n.width=window.innerWidth,n.height=window.innerHeight}),document.getElementById("theme-toggle").insertAdjacentHTML("afterend",'<div class="box theme-box" id="snow-switch"><span class="fa fa-snowflake-o"></span></div>'),document.getElementById("snow-switch")?.addEventListener("click",()=>{i?(setTimeout(()=>{i=!1},600),localStorage.setItem("kr-disable-snow",!0),n.classList.add("disabled")):(i=!0,localStorage.removeItem("kr-disable-snow"),n.classList.remove("disabled"),y())}),x()})();
